**<h1>Решение технического задания на позицию младшего программиста PHP</h1>**

**<h2>Аннотация</h2>**
> Решение написано на локально развернутом проекте на основе решения "Интернет-магазин" 
> из дистрибутива "1С-Битрикс: Управление сайтом".  


**<h2>Инструкция как применить решение</h2>**
> 1. Развернуть решение "Интернет-магазин" из дистрибутива "1С-Битрикс: Управление сайтом";
> 2. Спулить решение с репозитория с заменой файлов
> 3. В административной части сайта сменить шаблон сайта на "Шаблон для ТЗ"
> (это стандартный шаблон "Адаптивный шаблон интернет-магазин", но для выполнения задания пришлось кастомизировать его файлы)

**<h2>Как поменять шаблон?</h2>**
> 1. Перейдите в административной части во вкладку "Настройки => Настройки продукта => Сайты => Список сайтов
> 2. Внизу страницы в разделе "Шаблон сайта" вместо "Адаптивный шаблон интернет-магазина" вберите "Шаблон для ТЗ"
> 3. Нажмите кнопку "Сохранить"

**<h2>Пояснение к решению 1 задачи</h2>**
> Для решения задачи в 1 очередь была создана папка local, в которую я скопировал шаблон сайта, чтобы я мог его 
> кастомизировать и при дальнейших обновлениях мои изменения не затерлись.
> 
> В header.php я подключил класс "Bitrix\Main\Page\Asset" и с помощью его метода смог подключить созданный заранее файл main.js 
> в папке local/templates/main/js. Подключение выглядит следующим образом:

```php
    <? Asset::getInstance()->addJs(SITE_TEMPLATE_PATH.'/js/main.js') ?>
```

> Далее уже в подключенном файле main.js мной было реализовано отслеживание нажатий клавиши Enter с зажатым Control
> Добавил проверку на наличие выделенного текста и согласно ТЗ - окно подтверждения отправки сообщения
> После этого воспользовался технологией Ajax, чтобы отправить запрос на сервер и получить ответ без обновления страницы
> 
> Тут мной было реализовано 2 варианта отправки письма (так, как в задании нет уточнения каким способ необходимо отправлять письмо):
> 1. Активный файл sendTextError.php - отправка письма стандартной функцией в php - mail
> 2. Файл sendTextError.php.EventVersion - вызов события Bitrix. Однако, чтобы оно заработало необходимо в административной части 
> сайта создать такое событие и привязать к нему почтовый шаблон. (Более красивое решение, но перенести его в github 
> не представляется возможным)
> 
> Для того, чтобы протестировать отправку письма, на сервере, где развернут проект, должен быть поднят и настроен почтовый сервис 
> (postfix, mailhog, или т.п.).


**<h2 class="title">Пояснение к решению 2 задачи</h2>**
> В данной задаче не стал прибегать к разработке собственного компонента так, как посчитал это "изобретением велосипеда".
> В установленном решении использовался компонент bitrix:catalog, который уже имеет подходящую под описание реализацию
> Я заменил вызов компонента bitrix:catalog в файле /catalog/index.php с указанием параметров для работы списка сраванений
>
> Единственное, что пришлось изменить в стандартных параметрах - это параметр отвечающий за страницу сравнения 
> Вместо 'compare/' , я указал 'compare/?DIFFERENT=Y' так, как в задании сказано "compare/?DIFFERENT=Y".
> На странице сравнения присутствует возможность переключения способа отображения списка.

**<h2 class="title">Пояснение к решению 3 задачи</h2>**
> Для начала был создан раздел "Добавление товара в корзину по коду" (страница /add_to_basket_by_code)
> После этого на индексной странице добавил подключение нового компонента. Компонент создал в /local/components/main/basket.add.bycode
> Никакой сложной логики в классе компонента не писал так, однако обязательные методы добавил. После этого создал шаблон .default, 
> внутри которого приступил к разработке формы и взаимодейтсвия с ней, с помощью средств SavaScript.
> 
> По завершению у меня получилось 2 функции, которые отправляют Ajax запрос и получают резальтат:
> 1. Запрос на получение информации о товаре (ID, наименование, количество, остаток и цену)
> 2. Запрос, который добавляет товар в корзину в указанном количестве (Используя метод Bitrix, который автоматически
> проверяет на наличие такого товара в корзине и возможность покупки)

<div class="footer">
    <h4 class="autors">Created by <a class="links" href="https://t.me/Ko4CI">@Ko4CI</a></h4>
</div>

<style>
    .footer {
        margin-top: 100px;
        position: relative;
    }
    .links {
        color: white;
        cursor: pointer;
        animation: tags infinite 2s linear;
    }
    .autors {
        font-size: 14px;
        text-align: center;
        font-weight: bold;
        user-select: none;
        animation: identifier infinite 2s ease-in-out;
        position: absolute;
        bottom: 0;
        width: 100%;
    }
</style>
